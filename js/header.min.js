import{i as g}from"./common.min.js";window.enableFocusTrap=function(n,{openClass:i="is-open"}={}){const c='a[href], button:not([disabled]), textarea, input:not([disabled]), select, [tabindex]:not([tabindex="-1"])',r=document.createElement("span"),u=document.createElement("span");r.tabIndex=0,u.tabIndex=0,r.className="focus-guard",u.className="focus-guard",r.setAttribute("aria-hidden","true"),u.setAttribute("aria-hidden","true"),n.prepend(r),n.append(u);const f=()=>Array.from(n.querySelectorAll(c)).filter(a=>{const d=window.getComputedStyle(a),s=d.visibility!=="hidden"&&d.display!=="none",p=typeof a.getBoundingClientRect=="function"?a.getBoundingClientRect():{width:1,height:1},h=p.width>0&&p.height>0;return s&&h&&!a.hasAttribute("disabled")});function o(a){const d=f();d.length&&(a.target===r?d[d.length-1].focus():d[0].focus())}r.addEventListener("focus",o),u.addEventListener("focus",o);function t(a){if(a.key!=="Tab"||!n.classList.contains(i))return;const d=n.contains(document.activeElement),s=f();if(!s.length){a.preventDefault();return}if(!d){a.preventDefault(),(a.shiftKey?s[s.length-1]:s[0]).focus();return}}return document.addEventListener("keydown",t,!0),function(){document.removeEventListener("keydown",t,!0),r.removeEventListener("focus",o),u.removeEventListener("focus",o),r.remove(),u.remove()}},window.initMenu=function(){const n="is-open",i="is-active",c=document.documentElement,r="ontouchstart"in window||navigator.maxTouchPoints>0;let u=null,f=null,o=!1,t=null;function a(e){d(),t=document.createElement("div"),t.className="menu-overlay",t.style.zIndex=-1,e.appendChild(t),t.addEventListener("click",s),!r&&!g.any()&&(t.addEventListener("mouseenter",()=>{e.dispatchEvent(new Event("mouseleave"))}),t.addEventListener("mouseleave",()=>{e.dispatchEvent(new Event("mouseleave"))}))}function d(){t&&t.parentElement&&(t.removeEventListener("click",s),t.remove(),t=null)}function s(){document.querySelectorAll("[data-menu-target]."+n).forEach(e=>{e.classList.remove(n)}),document.querySelectorAll("[data-menu]."+i).forEach(e=>{e.classList.remove(i)}),c.classList.remove("menu-open"),c.className=[...c.classList].filter(e=>!e.startsWith("menu-open--")).join(" "),u&&(u(),u=null),o&&f&&f.focus(),f=null,o=!1}function p(e,{withFocusReturn:l=!0}={}){s();const m=document.querySelector(`[data-menu-target="${e}"]`),v=document.querySelector(`[data-menu="${e}"]`);if(m&&v){const L=m.parentElement.getBoundingClientRect();f=v,o=l,m.classList.add(n),v.classList.add(i),c.classList.add("menu-open"),c.classList.add(`menu-open--${e}`),m.style.setProperty("--menu-height",`${window.innerHeight-L.bottom}px`),u=enableFocusTrap(m,{openClass:"is-open"}),a(m)}}function h(e){document.querySelector(`[data-menu-target="${e}"]`)?.classList.contains(n)?s():p(e)}document.addEventListener("keydown",e=>{e.key==="Escape"&&s()}),new MutationObserver(e=>{for(const l of e)l.type==="attributes"&&l.attributeName==="data-fls-popup-open"&&c.hasAttribute("data-fls-popup-open")&&s()}).observe(c,{attributes:!0}),document.addEventListener("click",e=>{const l=e.target.closest("[data-menu]"),m=e.target.closest("[data-menu-target]."+n);if(l){(l.hasAttribute("data-menu-click")||r&&g.any())&&e.preventDefault();const v=l.dataset.menu;h(v)}else m||s()}),document.querySelectorAll("[data-menu-close]").forEach(e=>{e.addEventListener("click",l=>{l.preventDefault(),s()})}),!r&&!g.any()&&document.querySelectorAll("[data-menu]").forEach(e=>{if(e.hasAttribute("data-menu-click"))return;const l=e.dataset.menu,m=document.querySelector(`[data-menu-target="${l}"]`);if(!m)return;let v=!1,L=!1,E=null;const y=()=>{clearTimeout(E),E=setTimeout(()=>{!v&&!L&&(m.classList.remove(n),e.classList.remove(i),c.classList.remove(`menu-open--${l}`),document.querySelector("[data-menu-target]."+n)||c.classList.remove("menu-open"))},300)};e.addEventListener("mouseenter",()=>{v=!0,p(l,{withFocusReturn:!1})}),e.addEventListener("mouseleave",()=>{v=!1,y()}),m.addEventListener("mouseenter",()=>{L=!0}),m.addEventListener("mouseleave",()=>{L=!1,y()})})},document.addEventListener("DOMContentLoaded",window.initMenu),window.initSubmenu=function(){const n="is-open",i="is-active",r=`(max-width: ${549.98}px)`,u=document.querySelectorAll("[data-submenu]");if(!u.length)return;const f=window.matchMedia(r);u.forEach(o=>{const t=o.querySelector("[data-submenu-link]"),a=o.querySelector("[data-submenu-back]"),d=o.querySelector("[data-menu-close]");t&&t.addEventListener("click",s=>{f.matches&&(s.preventDefault(),t.classList.toggle(i),o.classList.toggle(n))}),a&&a.addEventListener("click",s=>{f.matches&&(s.preventDefault(),t.classList.remove(i),o.classList.remove(n))}),d&&d.addEventListener("click",s=>{f.matches&&(s.preventDefault(),t.classList.remove(i),o.classList.remove(n))})}),f.addEventListener("change",o=>{o.matches||u.forEach(t=>{t.querySelector("[data-submenu-link]")?.classList.remove(i),t.classList.remove(n)})})},document.addEventListener("DOMContentLoaded",window.initSubmenu),document.querySelectorAll(".lang-block").forEach(n=>{const i=n.querySelector(".lang-block__current");i&&(i.addEventListener("click",c=>{c.stopPropagation();const r=n.classList.toggle("is-active");i.classList.toggle("is-active",r)}),document.addEventListener("click",c=>{n.contains(c.target)||(n.classList.remove("is-active"),i.classList.remove("is-active"))}))});
